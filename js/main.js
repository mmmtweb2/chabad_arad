document.addEventListener('DOMContentLoaded',()=>{const lightbox=document.getElementById('lightbox');if(lightbox){const lightboxImg=document.getElementById('lightbox-img');const imageLinks=document.querySelectorAll('a[data-lightbox]');const closeBtn=lightbox.querySelector('.close-btn');const prevBtn=lightbox.querySelector('.prev-btn');const nextBtn=lightbox.querySelector('.next-btn');if(imageLinks.length===0)return;let currentImageIndex;const allImages=Array.from(imageLinks);function showImage(index){const imgLink=allImages[index];if(imgLink){lightboxImg.src=imgLink.href;lightboxImg.alt=imgLink.querySelector('img')?imgLink.querySelector('img').alt:'תמונה מוגדלת';currentImageIndex=index}}function openLightbox(index){showImage(index);lightbox.classList.add('show');document.body.style.overflow='hidden'}function closeLightbox(){lightbox.classList.remove('show');document.body.style.overflow=''}function showNextImage(){const nextIndex=(currentImageIndex+1)%allImages.length;showImage(nextIndex)}function showPrevImage(){const prevIndex=(currentImageIndex-1+allImages.length)%allImages.length;showImage(prevIndex)}allImages.forEach((item,index)=>{item.addEventListener('click',(e)=>{e.preventDefault();openLightbox(index)})});if(closeBtn)closeBtn.addEventListener('click',closeLightbox);if(nextBtn)nextBtn.addEventListener('click',showNextImage);if(prevBtn)prevBtn.addEventListener('click',showPrevImage);lightbox.addEventListener('click',(e)=>{if(e.target===lightbox){closeLightbox()}});document.addEventListener('keydown',(e)=>{if(lightbox.classList.contains('show')){if(e.key==='Escape')closeLightbox();if(e.key==='ArrowRight')showNextImage();if(e.key==='ArrowLeft')showPrevImage()}})}});